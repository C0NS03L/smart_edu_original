<% content_for :title, 'Dashboard' %>
<div class="flex min-h-[calc(100vh-64px)] flex-col">
  <div class="flex flex-grow flex-col items-center justify-center lg:flex-row">
    <% if @role == 'student' %>
      <div class="stats stats-vertical lg:stats-horizontal m-8 w-1/4 p-4 text-2xl shadow-lg">
        <div class="stat">
          <div class="text-xl font-bold">Student Details</div>
          <div class="stat-desc">Name: <%= @student_details.name %></div>
          <div class="stat-desc">Student ID: <%= @student_details.id %></div>
        </div>
        <div class="stat">
          <div class="text-xl font-bold">School Details</div>
          <div class="stat-desc"><%= @school_details.name %></div>
          <div class="stat-desc"><%= @school_details.address %></div>
          <div class="stat-desc"><%= @school_details.country %></div>
        </div>
        <div class="stat">
          <div class="text-xl font-bold">QR Code</div>
          <div class="stat-value">
            <%= link_to 'View My QR', student_path(@student_details), class: 'btn btn-primary' %>
          </div>
        </div>
      </div>
    <% elsif @role == 'staff' %>
      <!-- Staff-specific dashboard content -->
      <div class="stats stats-vertical lg:stats-horizontal m-8 w-1/4 p-4 text-2xl shadow-lg">
        <div class="stat">
          <div class="stat-figure text-secondary">
            <i class="fa-solid fa-chalkboard-teacher"></i>
          </div>
          <div class="stat-title text-xl font-bold">Students</div>
          <div class="stat-value"><%= number_with_delimiter(@student_count) %></div>
          <div class="stat-desc">Total Students</div>
        </div>
        <div class="stat">
          <div class="stat-figure text-accent">
            <i class="fa-solid fa-user-tie"></i>
          </div>
          <div class="stat-title text-xl font-bold">Total Check Ins</div>
          <div class="stat-value"><%= number_with_delimiter(@attendance_count) %></div>
          <div class="stat-desc">
            Last Check In <%= @last_checkin.nil? ? 'N/A' : time_ago_in_words(@last_checkin) %>
          </div>
        </div>
      </div>
    <% elsif @role == 'principal' %>
      <!-- Default dashboard content -->
      <div class="stats stats-vertical lg:stats-horizontal m-8 w-1/4 p-4 text-2xl shadow-lg">
        <div class="stat">
          <div class="stat-figure text-secondary">
            <i class="fa-solid fa-school"></i>
          </div>
          <div class="text-xl font-bold">School Details</div>
          <div class="stat-desc"><%= @school_details.name %></div>
          <div class="stat-desc"><%= @school_details.address %></div>
          <div class="stat-desc"><%= @school_details.country %></div>
        </div>
      </div>
    <% end %>
  </div>
  <div class="mt-4 flex flex-grow flex-col items-center">
    <div class="w-full rounded-lg bg-white p-6 shadow-lg lg:w-3/4">
      <div class="p-4 text-xl font-bold">Attendance</div>
      <div class="overflow-x-auto">
        <% if @role == 'student' %>
          <%= render 'home/student_table', q: @q %>
        <% elsif @role == 'staff' || @role == 'principal' %>
          <%= render 'home/staff_principal_table', q: @q %>
        <% end %>
      </div>
    </div>
  </div>
</div>

<script>
  function copyCodeFromMessage(elementId) {
    const element = document.getElementById(elementId)
    const fullText = element.textContent

    // Extract just the code (format: "XXX-YYYYYYYY")
    const codeMatch = fullText.match(/([A-Z]{3}-[0-9A-F]{8})/)
    const textToCopy = codeMatch ? codeMatch[0] : fullText

    navigator.clipboard
      .writeText(textToCopy)
      .then(() => {
        // Create a temporary alert to show the copy was successful
        const alertDiv = document.createElement('div')
        alertDiv.className = 'fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg'
        alertDiv.textContent = '<%= t('common.enrollment_codes.copied_message') %>'
        document.body.appendChild(alertDiv)

        setTimeout(() => {
          alertDiv.remove()
        }, 2000)
      })
      .catch((err) => {
        console.error('Failed to copy text: ', err)
      })
  }
</script>

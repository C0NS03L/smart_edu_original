<%= render "shared/notice" %>
<% content_for :title, "Students" %>
<div class="flex justify-end px-2">
  <%= link_to "New student", new_student_path, class: "btn btn-primary" %>
</div>
<div data-controller="search">
  <div class="flex justify-center items-center">
    <%== pagy_nav(@pagy) %>
  </div>
  <div class="overflow-x-auto m-2">
    <%= search_form_for @q, 
        url: students_path(format: :js),
        method: :get,
        html: {
          class: "mb-4",
          data: {
            search_target: "form",
            action: "input->search#search"
          }
        } do |f| %>
      <div class="flex items-center space-x-2">
        <%= f.label :name_cont, "Name" %>
        <%= f.search_field :name_cont, 
            class: "form-control border-2 border-gray-300 rounded p-2",
            autocomplete: "off" %>
      </div>
    <% end %>
    <div data-search-target="results">
      <%= render "table", students: @students, q: @q %>
    </div>
  </div>
  <div class="flex justify-center items-center">
    <%== pagy_nav(@pagy) %>
  </div>
</div>
